{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CLASSIC_SHIPS=[{name:'Carrier',size:5},{name:'Battleship',size:4},{name:'Cruiser',size:3},{name:'Submarine',size:3},{name:'Destroyer',size:2}];function ShipPlacement(_ref){var _CLASSIC_SHIPS$curren;let{boardSize,onPlaceShips}=_ref;const[ships,setShips]=useState([]);// {name, positions: [{x, y}]}\nconst[currentShipIdx,setCurrentShipIdx]=useState(0);const[orientation,setOrientation]=useState('horizontal');const[tempPositions,setTempPositions]=useState([]);const grid=Array(boardSize).fill(0).map(()=>Array(boardSize).fill(null));ships.forEach(ship=>{ship.positions.forEach(pos=>{grid[pos.y][pos.x]=ship.name;});});tempPositions.forEach(pos=>{grid[pos.y][pos.x]='preview';});const placeShip=(x,y)=>{const ship=CLASSIC_SHIPS[currentShipIdx];if(!ship)return;// Guard: no more ships\nlet positions=[];for(let i=0;i<ship.size;i++){let px=orientation==='horizontal'?x+i:x;let py=orientation==='vertical'?y+i:y;if(px>=boardSize||py>=boardSize)return;positions.push({x:px,y:py});}// Check overlap\nfor(const s of ships){for(const pos of s.positions){if(positions.some(p=>p.x===pos.x&&p.y===pos.y))return;}}setShips([...ships,{name:ship.name,positions}]);setCurrentShipIdx(currentShipIdx+1);setTempPositions([]);};const previewShip=(x,y)=>{const ship=CLASSIC_SHIPS[currentShipIdx];if(!ship)return setTempPositions([]);// Guard: no more ships\nlet positions=[];for(let i=0;i<ship.size;i++){let px=orientation==='horizontal'?x+i:x;let py=orientation==='vertical'?y+i:y;if(px>=boardSize||py>=boardSize)return setTempPositions([]);positions.push({x:px,y:py});}// Check overlap\nfor(const s of ships){for(const pos of s.positions){if(positions.some(p=>p.x===pos.x&&p.y===pos.y))return setTempPositions([]);}}setTempPositions(positions);};const clearPreview=()=>setTempPositions([]);const handleCellClick=(x,y)=>{if(currentShipIdx<CLASSIC_SHIPS.length)placeShip(x,y);};const handleOrientationToggle=()=>{setOrientation(orientation==='horizontal'?'vertical':'horizontal');};const handleSubmit=()=>{if(ships.length===CLASSIC_SHIPS.length){onPlaceShips(ships);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Place your ships\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Placing: \",/*#__PURE__*/_jsx(\"b\",{children:((_CLASSIC_SHIPS$curren=CLASSIC_SHIPS[currentShipIdx])===null||_CLASSIC_SHIPS$curren===void 0?void 0:_CLASSIC_SHIPS$curren.name)||'All placed!'}),\" (\",orientation,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleOrientationToggle,style:{marginBottom:8},disabled:currentShipIdx>=CLASSIC_SHIPS.length,children:\"Toggle Orientation\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:`repeat(${boardSize}, 32px)`,gap:2},children:Array(boardSize).fill(0).map((_,y)=>Array(boardSize).fill(0).map((_,x)=>{let cell=grid[y][x];const canInteract=currentShipIdx<CLASSIC_SHIPS.length;return/*#__PURE__*/_jsx(\"div\",{onClick:canInteract?()=>handleCellClick(x,y):undefined,onMouseEnter:canInteract?()=>previewShip(x,y):undefined,onMouseLeave:canInteract?clearPreview:undefined,style:{width:32,height:32,border:'1px solid #999',background:cell==='preview'?'#aaf':cell?'#555':'#fff',cursor:canInteract?'pointer':'default',boxSizing:'border-box',transition:'background 0.1s'}},x+'-'+y);}))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:ships.length!==CLASSIC_SHIPS.length,style:{marginTop:12},children:\"Confirm Placement\"})]});}export default ShipPlacement;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","CLASSIC_SHIPS","name","size","ShipPlacement","_ref","_CLASSIC_SHIPS$curren","boardSize","onPlaceShips","ships","setShips","currentShipIdx","setCurrentShipIdx","orientation","setOrientation","tempPositions","setTempPositions","grid","Array","fill","map","forEach","ship","positions","pos","y","x","placeShip","i","px","py","push","s","some","p","previewShip","clearPreview","handleCellClick","length","handleOrientationToggle","handleSubmit","children","onClick","style","marginBottom","disabled","display","gridTemplateColumns","gap","_","cell","canInteract","undefined","onMouseEnter","onMouseLeave","width","height","border","background","cursor","boxSizing","transition","marginTop"],"sources":["C:/Users/arast/OneDrive/Desktop/codingAI/battleship/client/src/ShipPlacement.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst CLASSIC_SHIPS = [\n  { name: 'Carrier', size: 5 },\n  { name: 'Battleship', size: 4 },\n  { name: 'Cruiser', size: 3 },\n  { name: 'Submarine', size: 3 },\n  { name: 'Destroyer', size: 2 },\n];\n\nfunction ShipPlacement({ boardSize, onPlaceShips }) {\n  const [ships, setShips] = useState([]); // {name, positions: [{x, y}]}\n  const [currentShipIdx, setCurrentShipIdx] = useState(0);\n  const [orientation, setOrientation] = useState('horizontal');\n  const [tempPositions, setTempPositions] = useState([]);\n\n  const grid = Array(boardSize).fill(0).map(() => Array(boardSize).fill(null));\n  ships.forEach(ship => {\n    ship.positions.forEach(pos => {\n      grid[pos.y][pos.x] = ship.name;\n    });\n  });\n  tempPositions.forEach(pos => {\n    grid[pos.y][pos.x] = 'preview';\n  });\n\n  const placeShip = (x, y) => {\n    const ship = CLASSIC_SHIPS[currentShipIdx];\n    if (!ship) return; // Guard: no more ships\n    let positions = [];\n    for (let i = 0; i < ship.size; i++) {\n      let px = orientation === 'horizontal' ? x + i : x;\n      let py = orientation === 'vertical' ? y + i : y;\n      if (px >= boardSize || py >= boardSize) return;\n      positions.push({ x: px, y: py });\n    }\n    // Check overlap\n    for (const s of ships) {\n      for (const pos of s.positions) {\n        if (positions.some(p => p.x === pos.x && p.y === pos.y)) return;\n      }\n    }\n    setShips([...ships, { name: ship.name, positions }]);\n    setCurrentShipIdx(currentShipIdx + 1);\n    setTempPositions([]);\n  };\n\n  const previewShip = (x, y) => {\n    const ship = CLASSIC_SHIPS[currentShipIdx];\n    if (!ship) return setTempPositions([]); // Guard: no more ships\n    let positions = [];\n    for (let i = 0; i < ship.size; i++) {\n      let px = orientation === 'horizontal' ? x + i : x;\n      let py = orientation === 'vertical' ? y + i : y;\n      if (px >= boardSize || py >= boardSize) return setTempPositions([]);\n      positions.push({ x: px, y: py });\n    }\n    // Check overlap\n    for (const s of ships) {\n      for (const pos of s.positions) {\n        if (positions.some(p => p.x === pos.x && p.y === pos.y)) return setTempPositions([]);\n      }\n    }\n    setTempPositions(positions);\n  };\n\n  const clearPreview = () => setTempPositions([]);\n\n  const handleCellClick = (x, y) => {\n    if (currentShipIdx < CLASSIC_SHIPS.length) placeShip(x, y);\n  };\n\n  const handleOrientationToggle = () => {\n    setOrientation(orientation === 'horizontal' ? 'vertical' : 'horizontal');\n  };\n\n  const handleSubmit = () => {\n    if (ships.length === CLASSIC_SHIPS.length) {\n      onPlaceShips(ships);\n    }\n  };\n\n  return (\n    <div>\n      <h3>Place your ships</h3>\n      <div>Placing: <b>{CLASSIC_SHIPS[currentShipIdx]?.name || 'All placed!'}</b> ({orientation})</div>\n      <button onClick={handleOrientationToggle} style={{marginBottom: 8}} disabled={currentShipIdx >= CLASSIC_SHIPS.length}>Toggle Orientation</button>\n      <div style={{ display: 'grid', gridTemplateColumns: `repeat(${boardSize}, 32px)`, gap: 2 }}>\n        {Array(boardSize).fill(0).map((_, y) =>\n          Array(boardSize).fill(0).map((_, x) => {\n            let cell = grid[y][x];\n            const canInteract = currentShipIdx < CLASSIC_SHIPS.length;\n            return (\n              <div\n                key={x + '-' + y}\n                onClick={canInteract ? () => handleCellClick(x, y) : undefined}\n                onMouseEnter={canInteract ? () => previewShip(x, y) : undefined}\n                onMouseLeave={canInteract ? clearPreview : undefined}\n                style={{\n                  width: 32, height: 32, border: '1px solid #999', background:\n                    cell === 'preview' ? '#aaf' : cell ? '#555' : '#fff',\n                  cursor: canInteract ? 'pointer' : 'default',\n                  boxSizing: 'border-box',\n                  transition: 'background 0.1s',\n                }}\n              />\n            );\n          })\n        )}\n      </div>\n      <button\n        onClick={handleSubmit}\n        disabled={ships.length !== CLASSIC_SHIPS.length}\n        style={{marginTop: 12}}\n      >\n        Confirm Placement\n      </button>\n    </div>\n  );\n}\n\nexport default ShipPlacement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}